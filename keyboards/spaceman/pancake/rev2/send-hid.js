var HID = require('node-hid');

// npx hid-showdevices libusb
// npx hid-showdevices hidraw
// either seems to work to get path, vendor id, and product id

const path = 'IOService:/AppleACPIPlatformExpert/PCI0@0/AppleACPIPCI/XHC1@14/XHC1@14000000/HS04@14400000/Pancake 2@14400000/IOUSBHostInterface@2/AppleUserUSBHostHIDDevice';
const vendorId = 21314;
const productId = 20530;

var device = new HID.HID(path);
// var device = new HID.HID(vendorId, productId);
console.log(device.getDeviceInfo())

// device.write([
//   0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
//   0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
//   0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
//   0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
//   0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
//   0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
//   0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
//   0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
// ]);

device.sendFeatureReport([
    0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
]);

// var devices = HID.devices();
// console.log(devices);


device.on('data', (data) => {
    console.log('HID:', data);
});
